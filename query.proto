syntax = "proto3";

package kaist.iclab.abclogger;

import "data.proto";
import "subject.proto";
import "common.proto";
import "heartbeat.proto";

option java_package = "kaist.iclab.abclogger.grpc";
option java_outer_classname = "Grpc";


message Query {
    message Data {
        DataType data_type = 1;
        string subject_email = 2;
        string device_id = 3;
        string device_info = 4;
        int64 from_time = 5;
        int64 to_time = 6;
        int32 limit = 7;
        bool is_descending = 8;
    }
    
    message Subjects {
        DataType data_type = 1;
        int64 from_time = 2;
        int64 to_time = 3;
        int32 limit = 4;
        bool is_descending = 5;
    }

    message HeartBeats {
        DataType data_type = 1;
        string subject_email = 2;
        string device_id = 3;
        string device_info = 4;
        int64 from_time = 5;
        int64 to_time = 6;
        int32 limit = 7;
        bool is_descending = 8;
    }
}

message Result {
    message Data {
        repeated Datum data = 1;
    }

    message Subjects {
        repeated Subject subject = 1;
    }

    message HeartBeats {
        repeated HeartBeat heart_beat = 1;
    }
}

service DataOperations {
    rpc CreateDatum(Datum) returns (Empty) { }
    rpc CreateHeartBeat(HeartBeat) returns (Empty) { }
    rpc ReadData(Query.Data) returns (Result.Data) { }
    rpc ReadSubjects(Query.Subjects) returns (Result.Subjects) { }
    rpc ReadHeartBeats(Query.HeartBeats) returns (Result.HeartBeats) { }
}